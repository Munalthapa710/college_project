<!DOCTYPE html>
<html>
<head>
    <title>{{ title or "User Panel" }} - EVTS</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_styles.css') }}">
    {% block head_extra %}{% endblock %} <!-- For dashboard specific CSS/JS links -->
</head>
<body>
    <nav class="navbar user-navbar">
        <a href="{{ url_for('user_home') }}" class="nav-brand">EVTS User</a>
        <div class="nav-links">
            <a href="{{ url_for('user_home') }}">Home</a>
            <a href="{{ url_for('user_dashboard') }}">Dashboard</a>
            <a href="{{ url_for('user_history') }}">History</a>
            <a href="{{ url_for('user_about') }}">About Us</a>
            <a href="{{ url_for('logout') }}">Logout</a>
        </div>
    </nav>
    <div class="dashboard-content">
        {% block content %}{% endblock %}
    </div>

    {# ------- ADD THIS SCRIPT BLOCK FOR BACK BUTTON/BFCACHE HANDLING ------- #}
    <script type="text/javascript">
        window.addEventListener('pageshow', function(event) {
            // event.persisted is true if the page is from bfcache (back/forward cache)
            if (event.persisted) {
                console.log("[BASE TEMPLATE] Page loaded from bfcache. Forcing reload.");
                window.location.reload();
            }
        });

        
        window.addEventListener('unload', function() {
            
        });
        console.log("[BASE TEMPLATE] Client-side cache prevention script loaded.");
    </script>
    {# ------- END OF ADDED SCRIPT BLOCK ------- #}
</body>
</html>